# 浏览器安全

## XSS

### 概念

XSS 攻击指的是跨站脚本攻击，是一种代码注入攻击。攻击者通过在网站注入恶意脚本，使之在用户的浏览器上运行，从而盗取用户的信息如 cookie 等。

### 分类

1. **存储型**  
  - 存储型的 XSS 将脚本存储到了服务端的数据库，然后在客户端执行这些脚本，从而达到攻击的效果。
  - 常见的场景就是评论区提交一段脚本代码，如果前后端没有做好转义，存储到数据库后，在客户端渲染时直接执行；

2. **反射型**
  - 反射形 XSS 攻击指的是恶意脚本作为请求URL的参数；浏览器解析后作为脚本执行，
  - 之所以叫它反射型, 是因为恶意脚本是通过作为网络请求的参数出现在 url 中，经过服务器解析响应，拼接在 HTML 中传回给客户端，然后浏览器解析执行恶意脚本。
  - 和存储型不一样的是，服务器并不会存储这些恶意脚本。

3. **文档型**
  - 文档形的 XSS 攻击其实也是恶意脚本被作为请求URL的参数；浏览器解析后作为脚本执行，和反射形的区别在于：由前端JS取出 URL 中的恶意代码并执行

### 防御

**从防止浏览器执行恶意代码着手**

1. 对用户的输入特殊字符进行 `转义和过滤`，例如： `<` => `&lt`
2. 对输出的内容进行 `转义和过滤`，对数据库返回的数据，前端在输出到页面时 进行一定的 `转义和过滤`
3. CSP（Content Security Policy）
4. HttpOnly：防止 `cookie` 被 js 读取

## CSRF

### 概念

CSRF（Cross-site request forgery）跨站请求伪造：

攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。


### 原理

就是http请求会自动携带 Cookie，而且是 HTTP 目标请求域名的 Cookie

### 防御

- **Samesite Cookie**：该属性表示 Cookie 不随着跨域请求发送，可以很大程度减少 CSRF 的攻击
- **CSRF Token**

## XSS 和 CSRF 的区别

- 两者的原理区别：CSRF 是利用 网站A 本身的漏洞，去请求 网站A 的 api。而 XSS 是向网站A 注入 JS代码，然后执行 JS 里的代码，篡改网站A的内容。
- CSRF仅仅是利用了http携带cookie的特性进行攻击的，但是`无法得到被攻击站点的cookie`。这个和XSS不同，`XSS一般是直接通过拿到Cookie`等信息进行攻击的

## SQL 注入
