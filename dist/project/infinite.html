<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>infinite-project | 前端随笔 WillianLiusHao</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Record William&#39;s daily study notes">
    
    <link rel="preload" href="/WillianLiusHao/assets/css/0.styles.d0aae437.css" as="style"><link rel="preload" href="/WillianLiusHao/assets/js/app.ae16b7fb.js" as="script"><link rel="preload" href="/WillianLiusHao/assets/js/2.8b11eef9.js" as="script"><link rel="preload" href="/WillianLiusHao/assets/js/35.1c5a5c5f.js" as="script"><link rel="prefetch" href="/WillianLiusHao/assets/js/10.0254b9aa.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/11.c951f4f1.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/12.f4e59a01.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/13.181bfb4f.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/14.bb6194d3.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/15.4c0341f1.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/16.c2c03bdc.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/17.f9597e59.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/18.37fea0cb.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/19.e96f48f5.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/20.38da475d.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/21.d6ea83fb.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/22.fe101214.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/23.c511b9ed.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/24.47a40d9a.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/25.30745e28.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/26.c1c8c70b.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/27.7eb7b5ea.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/28.c1523410.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/29.c0d1f9d7.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/3.85ccf5a7.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/30.f56cc46d.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/31.cd12686f.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/32.0a947c5c.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/33.bea7fbf2.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/34.9e01da9f.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/36.31df5eb6.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/37.84fde335.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/38.62be8779.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/39.dac841b5.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/4.c11d9ab6.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/40.0a5be4fe.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/41.e4aa8c16.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/42.315b34a2.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/5.3ced4326.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/6.365ce84f.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/7.83f2c71d.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/8.a3b778af.js"><link rel="prefetch" href="/WillianLiusHao/assets/js/9.2c288a11.js">
    <link rel="stylesheet" href="/WillianLiusHao/assets/css/0.styles.d0aae437.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/WillianLiusHao/" class="home-link router-link-active"><!----> <span class="site-name">前端随笔 WillianLiusHao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/WillianLiusHao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/WillianLiusHao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>daily</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>knowledge</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>project</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WillianLiusHao/project/infinite.html" aria-current="page" class="active sidebar-link">infinite.md</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/WillianLiusHao/project/infinite.html#lightning" class="sidebar-link">lightning</a></li><li class="sidebar-sub-header"><a href="/WillianLiusHao/project/infinite.html#desktop-micro" class="sidebar-link">desktop-micro</a></li><li class="sidebar-sub-header"><a href="/WillianLiusHao/project/infinite.html#eams、uni-app、小蓝书、官网" class="sidebar-link">eams、uni-app、小蓝书、官网</a></li><li class="sidebar-sub-header"><a href="/WillianLiusHao/project/infinite.html#cms" class="sidebar-link">cms</a></li></ul></li><li><a href="/WillianLiusHao/project/jssdk-monitor.html" class="sidebar-link">jssdk-monitor.md</a></li><li><a href="/WillianLiusHao/project/low-code.html" class="sidebar-link">low-code.md</a></li><li><a href="/WillianLiusHao/project/mini-router4.html" class="sidebar-link">mini-router4.md</a></li><li><a href="/WillianLiusHao/project/mini-single-spa.html" class="sidebar-link">mini-single-spa.md</a></li><li><a href="/WillianLiusHao/project/mini-vite.html" class="sidebar-link">mini-vite.md</a></li><li><a href="/WillianLiusHao/project/vite-plugin-generate-routes.html" class="sidebar-link">vite-plugin-generate-routes.md</a></li><li><a href="/WillianLiusHao/project/vue3-scroll-virtual-list.html" class="sidebar-link">vue3-scroll-virtual-list.md</a></li></ul></section></li><li><a href="/WillianLiusHao/" aria-current="page" class="sidebar-link">README.md</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="infinite-project"><a href="#infinite-project" class="header-anchor">#</a> infinite-project</h1> <h2 id="lightning"><a href="#lightning" class="header-anchor">#</a> lightning</h2> <p><code>Vue2 + Element-Ui + low-code</code></p> <ol><li><ul><li>[ ] 编辑页的设计，组件的设计，单向数据流？</li></ul></li> <li><ul><li><p>[ ] jssdk：事件上报 / 错误监控 / 行为回溯</p> <ul><li>错误监控
<ul><li>脚本执行报错
<ul><li>报错信息</li> <li>报错次数</li> <li>设备类型(android / ios)</li></ul></li> <li>资源加载报错
<ul><li>资源的地址</li> <li>资源的类型</li> <li>报错次数</li></ul></li> <li>接口请求报错
<ul><li>接口地址</li> <li>页面加载速度</li></ul></li></ul></li></ul></li> <li><p>事件上报</p> <ul><li><p>活动页关键节点埋点</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 定义一套固定的事件列表，每个组件通过可视化选择上报事件</span>
</code></pre></div></li> <li><p>桑基图回溯</p></li></ul></li> <li><p>行为回溯</p> <ul><li>录屏</li></ul></li></ul></li> <li><ul><li><p>[x] 权限设计</p></li> <li><p>登录权限(单点登录)</p></li> <li><p>页面权限(路由控制)</p> <ul><li>后端数据库存对应用户的路由权限，然后在全局的路由守卫中对页面进行过滤</li></ul></li> <li><p>功能权限(<code>自定义指令 v-auth</code>)</p></li></ul></li> <li><ul><li><p>[x] husky（配置git 提供的提交时生命周期，限制提交的<code>分支</code>/<code>文件夹</code>）</p></li> <li><p><code>husky</code> - <code>hooks</code></p> <ul><li>post-checkout</li> <li>pre-commit</li> <li>commit-msg</li></ul></li> <li><p>child_process - <code>spawn</code>：命令行执行库</p></li> <li><p>chalk：输出带颜色的log</p></li> <li><p>process：进程控制</p></li></ul></li> <li><ul><li><p>[x] 脚本（<strong>建议单独写个小项目作为开发cli工具,涉及vue 的工作原理</strong>）</p></li> <li><p>打包模板 yarn template</p></li> <li><p>启动模板 yarn serve</p></li> <li><p>打包项目 yarn build</p></li></ul></li> <li><ul><li><p>[ ] 性能优化</p></li> <li><p><strong><code>性能优化常见手段</code></strong></p></li> <li><p><strong><code>首屏优化： 关键渲染路径</code></strong></p> <ul><li>懒加载，预加载，代码压缩gzip</li> <li>性能优化指标（FP,FCP,LCP）</li></ul></li></ul></li></ol> <p><strong>难点/亮点</strong></p> <ul><li><p>组件开发设计、组件数据处理（数据流问题）</p> <ul><li>组件的分类
<ul><li>全局组件</li> <li>业务组件
<ul><li>主体展示</li> <li>配置编辑器</li> <li>样式编辑器</li></ul></li> <li>样式组件</li></ul></li></ul></li> <li><p>模板配置的变化追踪</p> <ul><li>对象的变化
<ul><li>增</li> <li>删</li> <li>改</li></ul></li> <li>数组的变化
<ul><li>数组长度变化</li> <li>数组增删</li></ul></li></ul></li> <li><p>一次性能优化</p> <ul><li>优化 pdf和弹层组件（体积大大缩小）
<ul><li>pdf（展示的时候才进行转化和渲染）</li> <li>弹层组件（按需加载）</li></ul></li></ul></li></ul> <h2 id="desktop-micro"><a href="#desktop-micro" class="header-anchor">#</a> desktop-micro</h2> <p><code>Qiankun + Monorepo + Vue3 + Tsx + Element-Plus</code></p> <ol><li><ul><li><p>[ ] Monorepo</p></li> <li><p>优点</p> <ul><li>易于代码复用：所有项目代码集中于单一仓库，易于抽离出共用的业务组件或工具</li> <li>易于依赖管理：依赖版本统一管理</li></ul></li> <li><p>workspace</p> <ul><li>避免重复安装包，减少了磁盘空间的占用，并降低了构建时间；</li> <li>内部代码可以彼此相互引用</li></ul></li> <li><p>配置</p> <ul><li>根目录 package.json
<ul><li><code>workspaces</code> 字段，定义哪个目录下为子项目</li> <li><code>private =&gt; true</code>，防止误将仓库发布</li></ul></li> <li>.eslintrc / .stylelintrc 等配置文件 下通过,根目录配置全局的一套方案，子应用通过 <code>extends</code> 字段获取父应用的相关配置</li></ul></li></ul></li> <li><p><strong>项目难点、亮点</strong></p> <ul><li><p>基础建设上（组件的二次封装）</p> <ul><li>[ ] table 组件（保证通用性前提下的简易性设计，<code>个性化和通用性</code> 两者的权衡）
<ul><li>props: fields（搜索） / columns（表格列） / toolbar（拓展操作） / paging（分页） / api（数据获取）</li> <li>event: <code>列排序</code> / <code>展开行</code> / <code>展开行二次排序</code></li></ul></li> <li>[ ] 搜索条件组件
<ul><li>类型多样：下拉(单选/多选/分组) / 输入 / 日期 / 城市选择</li> <li>数据预加载：把该用户下有权数据渲染到对应的组件选项中</li> <li>通讯：组件和表单组件的结合，怎么通讯更合适</li></ul></li></ul></li> <li><p>业务上</p> <ul><li><p>复杂度高（融合了公司核心业务后台，推到8年+的产品）</p></li> <li><p>数据量大（百万级别）</p></li> <li><p>功能性强（展开列/二次排序/自定义列/高级搜索等）</p> <ul><li><p><strong>高级搜索，动态渲染搜索表单</strong></p> <ul><li>描述：活动默认可搜索的字段是固定的，需要具体搜索某个字段数据的时候需要使用到</li> <li>难点
<ul><li>渲染方面（<code>动态渲染搜索表单</code>）
<ol><li>每个项目的字段是不同的，导致<code>可搜索的字段需要动态配置</code>（全放出来太多了，有100多个字段）</li> <li>后端存储当前项目搜索字段的配置，后端返回后，前端要<code>动态渲染搜索表单</code></li> <li>如果字段是统一类型还好，但字段分为<code>6种类型(文本框、时间范围、城市选择、下拉框、值范围)</code>，不同类型要渲染不同组件（尤其时间范围和城市选择）</li></ol></li> <li>传值方面（<code>数据处理</code>）
<ol><li>用户在不同类型表单组件输入值后，前端需要将值根据不同的表单类型按照不同处理方式，然后拼接上字段类型传给后端</li></ol></li></ul></li></ul></li> <li><p><strong>自定义列，动态渲染表格列</strong></p> <ul><li>描述：表格会有默认的所有项目都存在的列字段，用户可以自定义要展示的列</li> <li>难点
<ol><li>字段不固定：列字段是后端返回的，不是固定的数据字典（不同项目活动字段不同）</li> <li>字段渲染：配置好要展示的列后，列要怎么渲染是个头疼的问题
<ul><li>将常规字段按照字段类型定义了内容渲染规则</li> <li>对所有特殊字段写了一份渲染规则</li></ul></li> <li>字段排序？存储？
<ul><li>通过 sortable拖拽排序</li> <li>存储在 localstorage</li></ul></li> <li>列宽问题(渲染内容过长，不美观)
<ul><li>处理完列数据后，在重新渲染表格的时候，遍历表格内容，获取字段列中最长的内容（根据中英文和数字分别计算长度，进而控制列宽）</li></ul></li></ol></li></ul></li></ul></li></ul></li></ul></li> <li><p>复杂的权限设计（主应用控制，进入主应用后，获取用户角色和权限列表和数据列表，过滤路由列表只渲染特定的页面和限制接口数据）</p> <ul><li>应用权限
<ul><li>页面权限
<ul><li>由用户的角色权限决定
<ul><li>path</li> <li>code</li> <li>level</li></ul></li></ul></li> <li>功能权限
<ul><li>自定义指令</li></ul></li></ul></li> <li>数据权限</li></ul></li></ol> <p><strong>Q&amp;A</strong></p> <blockquote><p>Q1：Why not Iframe？
<a href="https://www.yuque.com/kuitos/gky7yw/gesexv" target="_blank" rel="noopener noreferrer">Why Not Iframe？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <blockquote><p>Q2：复杂的权限设计？</p></blockquote> <p>分两大模块</p> <ul><li>应用权限</li> <li>数据权限（贯穿所有应用，以企业为维度，不同的项目运营同学只看自己项目的数据）</li></ul> <p>用户的权限取决于角色的权限，角色的权限由树状结构存储(path,code,level)</p> <p>路由由主应用控制，当请求获取到对应用户的权限后，动态渲染菜单</p> <blockquote><p>Q3：讲一下为什么用微前端，qiankun的特性是什么，和其他微前端框架对比？</p></blockquote> <p><strong>微前端架构</strong></p> <ul><li>HTML entry</li> <li>沙箱
<ul><li>js 沙箱隔离</li> <li>css 样式隔离</li></ul></li> <li>应用间通信</li> <li>预加载</li></ul> <table><thead><tr><th>微前端框架</th> <th>原理</th> <th>优点</th> <th>不足</th></tr></thead> <tbody><tr><td>qiankun(ali基于single-spa)</td> <td>监听路由变化，渲染对应的子应用，进行挂载</td> <td>1.单一子应用   2.子应用无法保活  3.接入适配成本高</td> <td></td></tr> <tr><td>wujie(tencent)</td> <td></td> <td></td> <td></td></tr> <tr><td>micro-app(jd)</td> <td><strong>WebComponent</strong>、CustomElement、ShadowDom</td> <td></td> <td></td></tr></tbody></table> <p><a href="https://eluxjs.com/designed/micro-module.html" target="_blank" rel="noopener noreferrer"><strong>微模块</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th>类型</th> <th>颗粒度</th> <th>灵活性</th></tr></thead> <tbody><tr><td>微前端</td> <td>粗</td> <td>低</td></tr> <tr><td>微模块</td> <td>细</td> <td>高</td></tr></tbody></table> <table><thead><tr><th>类型</th> <th>结构</th></tr></thead> <tbody><tr><td>当前常规前端工程</td> <td><code>文件职能-功能模块</code>结构，即<code>组件、素材、状态、路由</code>等文件职能统一管理</td></tr> <tr><td>Elux工程</td> <td><code>功能模块-文件职能</code>结构，文件职能由功能模块自己管理</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code>├─ src
│  ├─ api                 # <span class="token constant">API</span>接口管理
│  ├─ assets              # 静态资源文件
│  ├─ components          # 全局组件
│  ├─ hooks               # 常用 Hooks
│  ├─ routers             # 路由管理
│  ├─ store               # store
│  ├─ styles              # 全局样式
│  ├─ utils               # 工具库
│  ├─ views               # 项目所有页面
│  ├─ App<span class="token punctuation">.</span>vue             # 入口页面
│  └─ main<span class="token punctuation">.</span>ts             # 入口文件
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>src
├── modules
│      ├──  ModuleA
│      │     ├── entities
│      │     ├── assets
│      │     ├── api
│      │     ├── utils
│      │     ├── language
│      │     ├── components
│      │     ├── views
│      │     ├── model<span class="token punctuation">.</span>ts
│      │     └── index<span class="token punctuation">.</span>ts
│      │ 
│      ├── ModuleB
│      ├── ModuleC
</code></pre></div><p><strong>个人理解：</strong></p> <ul><li>从产品上讲，微模块为了能更好的复用<strong>业务功能</strong>，更便于功能的自由组合使用</li> <li>从开发上讲，微模块聚合了某一<strong>特定的业务场景</strong>功能（有单独的api,assets,utils,view等），独立自治，是可以独立运转的小系统</li></ul> <blockquote><p>Q4: why? 背景? 优缺点?</p></blockquote> <ul><li>业务上：为了整合公司已有的众多后台管理系统，删减遗弃的系统功能，也为了梳理业务线条，统一化系统管理</li> <li>技术上：为了后续新系统接入，兼容不同技术的系统，同时接触全新的 ts+vue3 技术体系</li></ul> <blockquote><p>Q5: 说说你对monorepo的理解？他的优缺点是什么？</p></blockquote> <p>A：传统的<code>mutirepo</code>是多项目多仓库，而<code>monorepo</code>是多项目单仓库，目前google,vue3,vite 这些知名开源项目都是采用这种方式进行管理。</p> <ul><li>mutirepo的痛点
<ul><li>代码复用：不利于 组件/工具函数/配置 的复用</li> <li>版本管理：同一个依赖，不同项目可能用了不同版本，每个项目都需要手动依次更新</li> <li>项目基建：CICD流程，发布部署，代码提交流程的不统一</li></ul></li></ul> <h2 id="eams、uni-app、小蓝书、官网"><a href="#eams、uni-app、小蓝书、官网" class="header-anchor">#</a> eams、uni-app、小蓝书、官网</h2> <p><code>Vue3 + Ts + Vite + Pinia + echarts + Tailwindcss</code></p> <ul><li><p>[x] 制定代码和git规范(<code>standard</code> 规范)、自动化版本管理</p> <ul><li><p>git cz =&gt; Commitlint规范化提交格式 / cz-conventional-changelog(changelog生成)</p></li> <li><p>standard-version =&gt; 根据提交信息，更新版本号，打tag</p></li> <li><p>代码规范(eslint检测 + vscode 插件自动格式化)</p> <ul><li>js: <code>Eslint</code></li> <li>html: <code>plugin:vue/vue3-essential</code>/<code>plugin:vue/recommended</code>、<code>@vue/standard</code></li> <li>ts: <code>@vue/typescript/recommended</code></li> <li>scss: stylelint <code>stylelint-config-standard-scss</code></li></ul></li> <li><p>git规范：格式化提交，自动化更新版本号及生成changelog</p> <ul><li>Husky(pre-commit/commit-msg/pre-push) + Lint-staged</li> <li>Commitlint(git cz) + cz-conventional-changelog</li> <li>standard-version：更新版本</li></ul></li></ul></li> <li><p>[x] <strong>echarts封装</strong></p></li> <li><p>[x] pinia + 持久化存储(<code>pinia-plugin-persistedstate</code>)</p></li> <li><p>[x] 首屏加载优化</p> <ul><li>ngnix 开启gzip压缩</li> <li>前端 <code>compression-webpack-plugin</code> 插件压缩js和css</li></ul></li> <li><p>[x] html2canvas pdfjs</p> <ul><li>图片如何适配pdf大小</li> <li><strong>页眉页码</strong></li> <li>清晰度问题：设置缩放比例，设置设备像素比</li> <li><strong>！！分页处理</strong> <ul><li>先将长图统一转成canvas</li> <li>然后通过固定的A4纸宽高（减去页眉页码），<code>新创建一个canvas</code>，用于<code>绘制当前页面的canvas</code></li> <li>通过宽高和原始的canvas数据，对新创建的canvas进行数据填充</li> <li>一页页绘制</li></ul></li> <li><strong>！！！截断处理</strong> <ul><li>获取长图的dom，在绘制当页canvas时，判断当前最后一个元素高度是否被截断，截断则将此元素放至下一页</li></ul></li> <li><strong>浏览器会限制最大的canvas高度(chrome: 16384px)</strong></li></ul></li> <li><p>[x] 多请求下loading 的展示和关闭</p> <ul><li>通过全局的 app.vue 中全局的 loading配合 axios 拦截器实现（<code>axios 中需要增加一个请求计数器</code>=&gt; 统计所有发出的请求数，每完成一个减一，当且仅当计数为0的时候才关闭loading）</li></ul></li> <li><p>[x] 批量导出</p> <ul><li>服务端导出实现逻辑
<ol><li>客户端导入报表(excel)，node 接口读取关键字段</li> <li>node 端通过 <code>puppeteer</code> 创建浏览器，访问线上小蓝书页面，<code>通过点击事件触发导出</code>。</li> <li>客户端配合将pdf上传至 <code>oss</code> 服务器，生成线上链接，插入到页面中的节点属性中。</li> <li>node 通过获取浏览器节点的属性，得到pdf链接</li></ol></li> <li>批量
<ul><li>promise 实现任务队列，控制并发数</li></ul></li></ul></li> <li><p>[ ] svg-icon 组件</p> <ul><li>use 标签</li></ul></li></ul> <h2 id="cms"><a href="#cms" class="header-anchor">#</a> cms</h2> <ol><li>cli</li> <li>丰富组件</li> <li>路由自动生成（vite插件）</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/WillianLiusHao/knowledge/计算机网络/大纲.html" class="prev">
        大纲.md
      </a></span> <span class="next"><a href="/WillianLiusHao/project/jssdk-monitor.html">
        jssdk-monitor.md
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/WillianLiusHao/assets/js/app.ae16b7fb.js" defer></script><script src="/WillianLiusHao/assets/js/2.8b11eef9.js" defer></script><script src="/WillianLiusHao/assets/js/35.1c5a5c5f.js" defer></script>
  </body>
</html>
